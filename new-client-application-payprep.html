<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>New Client Payment</title>
<!-- demo -->
<!--<script src="https://chosenpayments.transactiongateway.com/token/Collect.js" data-tokenization-key="B44HGb-W2nHD5-RcH5Uh-Q5E658"></script>-->
<!-- REAL not needed on this billing page -->
<!--<script src="https://chosenpayments.transactiongateway.com/token/Collect.js" data-tokenization-key="5ZQET2-9y632K-PSMUY5-6UU3pU"></script>-->
	
	
	
<!-- demo <script src="https://chosenpayments.transactiongateway.com/token/Collect.js" data-tokenization-key="5ZQET2-9y632K-PSMUY5-6UU3pU"></script>-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="inc/jq/themes/theme-02.min.css" />
<link rel="stylesheet" href="inc/jq/themes/jquery.mobile.icons.min.css" />
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script src="inc/jq/validate/dist/jquery.validate.js"></script>
<script>
	$(function(){
		$( "[data-role='header'], [data-role='footer']" ).toolbar();
		});
    </script>
<link href="mob.css" rel="stylesheet" type="text/css" />
<style type="text/css"></style>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no">
</head>
<body>
<div data-role="header" data-position="fixed" data-theme="a">
  <div class="box1 center1 boxblue" > <img src="pics/appbanner-320x60-home1.png" width="320" height="61" class="center" alt=""> </div>
</div>
<section id="page1" data-role="page">
  <div role="main" class="ui-content">
    <div class="content" >
      <div class="box1 center1" > 
        
        <!--INSERT START -->
        <span class="print_data_20"><strong> 
        
        <!--for main response is --> 
        
        <span id="response"></span> <br>
        </strong> </span> <br>
<!--
        4111111111111111<br>
        <br>
-->
<!--
        <a  onclick="javascript:doReload()">REFRESH</a><br>
        <br>
-->
        
        <!-- NO LINKS HERE can delete good data --> 
        <!--						required minlength="1"--> 
        <!--hidden ?????????????????????  Phone2 or phone2    -->
        
        <table width="320" align="center" border="0">
          <tr>
            <td width="1" valign="TOP" ></td>
            <td valign="TOP" align="center" ><form action="" method="post" name="thisform" id="thisform" >
                <table width="95%" border="0" align="center" cellpadding="2" cellspacing="2">
                 

	
					
                  <tr align="left" valign="top">
                    <td align="center">
						
						
<!--						 <button id="submit_val" type="submit">Continue tryyyyyyyy</button>-->
			
						<span id="readytext"></span>
						
						
<div id="readynow">

	
	
<!-- this works seems to need js AND type="submit"-->
						
						<button id="submit_val2" type="submit" onclick="javascript:gopayment()">Continue with Credit Card Payment</button>
	
	
</div>
	
						
<!--						<button id="submit_val2" type="submit" >Continue tryyyy 3333333333333</button>-->
						
						
<!--						this no validate<a class="buttonlink2" href="#" onclick="javascript:gopayment()">Continue with Payment</a>-->
						
						
						
						<!-- payshow no hide for now - form too long -->
						 <!--	rev Submit button id differnt from JS name ---- real - this is hidden - with real id--> 
						
<!--
						<div id="payshow">

						
						 
						
						
						</div>
-->
                      
                      
					  </td>
                  </tr>
                </table>
              </form></td>
          </tr>
        </table>
        <script id="go1">

$("#page1").on("pageinit", function() {
//	
//	$("#payshow").show(500);
//	$("#payshow").hide(1000);
//	
//	console.log('hide payshow');	
//alert ("test1");
//		
//$("form").validate({
//// maybe soon zip for avs         
//rules: {
//
//zip99: {
//required: true
//},
//state99: {
//required: true
//},
//first_name99: {
//required: true
//}, last_name99: {
//required: true
//}
//},
//errorPlacement: function(error, element) {
//error.insertBefore(element.parent());
//},
//			
//submitHandler: function(form) {
//        //code that should happen after validation if no errors are found goes here
//        
////  alert ("success now card");
////  just trigger listener now after validate
//	
//window.scrollTo(0, 0);
//	// so user can see
//	$("#customPayButton").click();  
// },
////end handle
//	
//});
// 
}

); // end page 1 validate

</script> 
        <script id="ready">
		
$(document).ready(function(){
	
//clear
localStorage.setItem("process_response", "");	
	
	

//document.getElementById("readytext").style.visibility = "hidden";	
document.getElementById('readytext').textContent = " Please wait while loading";	
	
//	$("#readynow").show(500);
$("#readynow").hide(0);	
	
	
	
	
	
//$("#payshow").show(0);
// start hidden
// payshow no hide for now - form too long
//$("#payshow").hide(0);	

// hide real button for collect
//document.getElementById("customPayButton").style.visibility = "hidden";

var theid = localStorage.getItem("Client_ID");

// show that something is loading


if(

"process_response" in localStorage

//localStorage.getItem("process_response") !=""

){
$('#response').html(localStorage.getItem("process_response"));	

console.log('process_response exists is yes ');	

}else{

$('#response').html("<b>Click Submit at bottom when ready</b>");
console.log('process_response exists is no ');
}

	
$.post('https://idcapp.com/app-data/pay/getnewclient-js.php', {	
	
Client_ID: localStorage.getItem("Client_ID"),


}, function(data){

console.log('login success is YES ');	

$.each(data, function(key, value) {
console. log ('item', key, value);

// initialize these
localStorage.setItem("rt_completecheck", "");
localStorage.setItem("rt_completecheck_alco", "");
localStorage.setItem("rt_completecheck_drug", "");
localStorage.setItem("postaccident", '');
localStorage.setItem('postaccdate', '');

//full login fields - so no need to login after payment

localStorage.setItem("Contact_First", value.Contact_First);
localStorage.setItem("Contact_Last", value.Contact_Last);
localStorage.setItem("Client_ID", value.Client_ID);
localStorage.setItem("password", value.password);
localStorage.setItem("type_of_company_number", value.type_of_company_number);
	
localStorage.setItem("Company", value.Company);
localStorage.setItem("Phone1", value.Phone1);
localStorage.setItem("Phone2", value.Phone2);
localStorage.setItem("Fax", value.Fax);
localStorage.setItem("Address", value.Address);
localStorage.setItem("City", value.City);
localStorage.setItem("State", value.State);
localStorage.setItem("Zip", value.Zip);
localStorage.setItem("Billing_Company_Name", value.Billing_Company_Name);
localStorage.setItem("F_Name_Billing", value.F_Name_Billing);
localStorage.setItem("L_Name_Billing", value.L_Name_Billing);
localStorage.setItem("Billing_Address", value.Billing_Address);
localStorage.setItem("Billing_City", value.Billing_City);
localStorage.setItem("Billing_State", value.State);
localStorage.setItem("Billing_Zip", value.Billing_Zip);
localStorage.setItem("Billing_Phone", value.Billing_Phone);
localStorage.setItem("Billing_Fax", value.Billing_Fax);
localStorage.setItem("email_Billing_Address", value.email_Billing_Address);
//localStorage.setItem("email_Billing_Address", 'yo22em');
localStorage.setItem("cl_emp_First", value.cl_emp_First);
localStorage.setItem("cl_emp_Last", value.cl_emp_Last);
localStorage.setItem("cl_emp_Employee_ID_Num", value.cl_emp_Employee_ID_Num);

localStorage.setItem("cl_emp_City_Taxi_Permit_No", value.cl_emp_City_Taxi_Permit_No);
localStorage.setItem("cl_emp_City_Taxi_Permit_Expiration", value.cl_emp_City_Taxi_Permit_Expiration);
// nah dupe fields to dump localStorage.setItem("cl_emp_PUC_Number", value.cl_emp_PUC_Number);

localStorage.setItem("cl_emp_Drivers_License_No", value.cl_emp_Drivers_License_No);
localStorage.setItem("cl_emp_Notify_Email", value.cl_emp_Notify_Email);
localStorage.setItem("cl_emp_Notify_PhoneText", value.cl_emp_Notify_PhoneText);
localStorage.setItem("cl_emp_Social_Security", value.cl_emp_Social_Security);
localStorage.setItem("cl_emp_security_code", value.cl_emp_security_code);
	
//new 2019
localStorage.setItem("cl_emp_termination_date", value.cl_emp_termination_date);
localStorage.setItem("cl_emp_date_term_web", value.cl_emp_date_term_web);
localStorage.setItem("cl_emp_status", value.cl_emp_status);
localStorage.setItem("cl_emp_date_entered", value.cl_emp_date_entered);

localStorage.setItem("PUC_Number", value.PUC_Number);
localStorage.setItem("PUC_Date", value.PUC_Date);
localStorage.setItem("Kind_of_Company", value.Kind_of_Company);
localStorage.setItem("Date_Signup", value.Date_Signup);
localStorage.setItem("Date_Terminated", value.Date_Terminated);

localStorage.setItem("date_term_web_CL", value.date_term_web_CL);

localStorage.setItem("Date_Entered", value.Date_Entered);
localStorage.setItem("Status", value.Status);
localStorage.setItem("Type", value.Type);

localStorage.setItem("cl_toc_City", value.cl_toc_City);
localStorage.setItem("cl_toc_term_reason_toggle", value.cl_toc_term_reason_toggle);
localStorage.setItem("email_Confidential_Email", value.email_Confidential_Email);
localStorage.setItem("email_Agency", value.email_Agency);

localStorage.setItem("date_term_web_CL", value.date_term_web_CL);
localStorage.setItem("cl_toc_cert_desc_new", value.cl_toc_cert_desc_new);
localStorage.setItem("cl_toc_cert_desc_renew", value.cl_toc_cert_desc_renew);
localStorage.setItem("cl_toc_cert_fee_signup", value.cl_toc_cert_fee_signup);
localStorage.setItem("cl_toc_cert_fee_renewal", value.cl_toc_cert_fee_renewal);
localStorage.setItem("cl_toc_CommonName", value.cl_toc_CommonName);
localStorage.setItem("cl_toc_show_app_randoms", value.cl_toc_show_app_randoms);
localStorage.setItem("cl_toc_toc_collect_type", value.cl_toc_toc_collect_type);
//new 2018
localStorage.setItem("cl_toc_annual_only", value.cl_toc_annual_only);
	
if(value.cl_toc_agency_name == ""){
localStorage.setItem("cl_toc_agency_name", "CA PUC");
}else{
localStorage.setItem("cl_toc_agency_name", value.cl_toc_agency_name); 
}

localStorage.setItem("date_TAXI_1stpaid_certific", value.date_TAXI_1stpaid_certific);
localStorage.setItem("Date_TAXI_1st_yr_certi_expire", value.Date_TAXI_1st_yr_certi_expire);
localStorage.setItem("cl_emp_date_last_drug_db", value.cl_emp_date_last_drug_db);
localStorage.setItem("cl_emp_date_last_alc_db", value.cl_emp_date_last_alc_db);

localStorage.setItem("cl_emp_Division_ID_Num", value.cl_emp_Division_ID_Num);
localStorage.setItem("cl_emp_Division_Name", value.cl_emp_Division_Name);

localStorage.setItem("cl_toc_owner_Company", value.cl_toc_owner_Company);
localStorage.setItem("cl_toc_owner_Contact_First", value.cl_toc_owner_Contact_First);
localStorage.setItem("cl_toc_owner_Contact_Last", value.cl_toc_owner_Contact_Last);
localStorage.setItem("cl_toc_owner_Address", value.cl_toc_owner_Address);
localStorage.setItem("cl_toc_owner_City", value.cl_toc_owner_City);
localStorage.setItem("cl_toc_owner_State", value.cl_toc_owner_State);
localStorage.setItem("cl_toc_owner_Zip", value.cl_toc_owner_Zip);
localStorage.setItem("cl_toc_owner_Phone1", value.cl_toc_owner_Phone1);
localStorage.setItem("cl_toc_owner_email_Confidential_Email", value.cl_toc_owner_email_Confidential_Email);
localStorage.setItem("cl_toc_owner_contact_full_c", value.cl_toc_owner_contact_full_c);

localStorage.setItem("tocNum1", value.tocNum1);
localStorage.setItem("tocNum2", value.tocNum2);
localStorage.setItem("tocNum3", value.tocNum3);
localStorage.setItem("tocNum4", value.tocNum4);
localStorage.setItem("tocNum5", value.tocNum5);
localStorage.setItem("cl_tocextra1_CommonName", value.cl_tocextra1_CommonName);
localStorage.setItem("cl_tocextra2_CommonName", value.cl_tocextra2_CommonName);
localStorage.setItem("cl_tocextra3_CommonName", value.cl_tocextra3_CommonName);
localStorage.setItem("cl_tocextra4_CommonName", value.cl_tocextra4_CommonName);
localStorage.setItem("cl_tocextra5_CommonName", value.cl_tocextra5_CommonName);
localStorage.setItem("mgr1_email_Confidential_Email", value.mgr1_email_Confidential_Email);
localStorage.setItem("mgr2_email_Confidential_Email", value.mgr2_email_Confidential_Email);
localStorage.setItem("mgr3_email_Confidential_Email", value.mgr3_email_Confidential_Email);
localStorage.setItem("mgr4_email_Confidential_Email", value.mgr4_email_Confidential_Email);
localStorage.setItem("mgr5_email_Confidential_Email", value.mgr5_email_Confidential_Email);
localStorage.setItem("mgr1_contact_full_c", value.mgr1_contact_full_c);
localStorage.setItem("mgr2_contact_full_c", value.mgr2_contact_full_c);
localStorage.setItem("mgr3_contact_full_c", value.mgr3_contact_full_c);
localStorage.setItem("mgr4_contact_full_c", value.mgr4_contact_full_c);
localStorage.setItem("mgr5_contact_full_c", value.mgr5_contact_full_c);
localStorage.setItem("cl_toc_Federal", value.cl_toc_Federal);


localStorage.setItem("z_mod_date", value.z_mod_date);
localStorage.setItem("z_webtmp3", value.z_webtmp3);

// initialize these
localStorage.setItem("rt_completecheck", "");
localStorage.setItem("rt_completecheck_alco", "");
localStorage.setItem("rt_completecheck_drug", "");
localStorage.setItem("postaccident", '');
localStorage.setItem('postaccdate', '');

//alert("pre_emp_completecheck");
// can't use foundzero ---- hmm why not - i think I will here for this new guy
//localStorage.setItem("pre_emp_completecheck", "needcheck");
localStorage.setItem("pre_emp_completecheck", "foundzero");	
	
localStorage.setItem("lastcheck_test", "01/01/2015");
//new 11-08-15 (05-07-06 PM)

localStorage.setItem("cert_calc", value.cert_calc);
localStorage.setItem("certfee_calc", value.certfee_calc);

localStorage.setItem("date_TAXI_annual_renewexpir_certification", value.date_TAXI_annual_renewexpir_certification);
localStorage.setItem("date_TAXI_paid_Annual_Renewal_fee", value.date_TAXI_paid_Annual_Renewal_fee);
localStorage.setItem("cl_toc_type_of_consortium", value.cl_toc_type_of_consortium);
localStorage.setItem("Signup_date", value.Signup_date);
localStorage.setItem("sdate", value.sdate);
localStorage.setItem("xdate", value.xdate);
localStorage.setItem("diffdaysint", value.diffdaysint);

if ( value.diffdaysint <= 365){
localStorage.setItem("certgo", 'new');	
}else{
localStorage.setItem("certgo", 'renew');			
}

localStorage.setItem("cl_toc_LabMaster", value.cl_toc_LabMaster);
localStorage.setItem("LabMasterAccount", value.LabMasterAccount);
localStorage.setItem("LabMasterAcc", value.LabMasterAcc);
localStorage.setItem("LabMasterLocation", value.LabMasterLocation);		
});

$.post('https://idcapp.com/app-data/pay/getlastinv-js.php', {
//
Client_ID: localStorage.getItem("Client_ID"),		




}, function(data){


console.log('success last inv is  '+ data);

localStorage.setItem("cl_last_invoice_id", data);
	
//alert( "ready." );	
	// now ready show
document.getElementById('readytext').textContent = "";	
//	$("#readynow").show(500);
$("#readynow").hide(0);		
	
$("#readynow").show(1000);	


}).fail(function() {
// just in case posting your form failed
alert( "Posting GET INVOICE failed." );

});

// i am keeping getinv inside get client - ok for now

}).fail(function() {

// just in case posting your form failed
alert( "Login Posting failed." );

});

// to prevent refreshing the whole page page
return false;
// end

});

</script> 

		  

 
<script id="s-doReload">
/* xcx script: doReload v.1 */

function doReload(){
location.reload(true)
}
</script> 
		  
		  
<script>
function gopayment(){
	
	//alert("go pay");
	

	
var tm = new Date().getTime();
//window.location.href = "new-client-application-payment-pay.html?tm=" + tm;	
	
window.location.href = "new-client-application-payment-bill.html?tm=" + tm;	

}
</script>				  
		  
		  
		  
		  
		  
		  
<!--INSERT END --> 

</div>
<!-- end .box --> 
</div>
<!-- end .content --> 
</div>
<!-- /ui-content --> 

</section>
</body>
</html>
